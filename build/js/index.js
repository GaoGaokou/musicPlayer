var songList,$=window.Zepto,root=window.player,$body=$(document.body),index=0,audioControl=new root.audioControl;function bindEvent(){$body.on("play:change",function(o,n){audioControl.getAudio(songList[n].audio),"play"==audioControl.status?(audioControl.play(),root.timePercentControl.start()):audioControl.pause(),root.render(songList[n]),root.timePercentControl.renderAllTime(songList[n]),root.timePercentControl.curTime(0)}),$body.trigger("play:change",0),$body.on("click",".play-btn",function(){"play"==audioControl.status?(audioControl.pause(),root.timePercentControl.stop()):(audioControl.play(),root.timePercentControl.start()),$(this).toggleClass("pause")}),$body.on("click",".prev-btn",function(){index=controlIndex.prev(),root.render(songList[index]),$body.trigger("play:change",index)}),$body.on("click",".next-btn",function(){index=controlIndex.next(),root.render(songList[index]),$body.trigger("play:change",index)})}function bindTouch(){var o=$body.find(".slider-pointer"),n=$body.find(".pro-wrapper"),t=0,e=n.offset().left,r=parseInt(n.css("width"));void 0,o.on("touchstart",function(){root.timePercentControl.stop()}),o.on("touchmove",function(o){var n=o.changedTouches[0].clientX;((t=(n-e)/r)<0||1<t)&&(t=0),root.timePercentControl.curTime(t)}),o.on("touchend",function(){allSecond=songList[controlIndex.index].duration,currTime=allSecond*t,audioControl.playTo(currTime),$body.find(".play-btn").toggleClass("")})}function getData(o){$.ajax({type:"GET",url:o,success:function(o){songList=o,bindEvent(),bindTouch(),controlIndex=new root.controlIndex(o.length)},error:function(){void 0}})}getData("../mock/data.json");